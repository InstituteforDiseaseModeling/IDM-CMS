

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>OptimalTransportSSA &mdash; Compartmental Modeling (CMS)  documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/tipuesearch/tipuesearch.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Compartmental Modeling (CMS)  documentation" href="index.html"/>
        <link rel="up" title="Spatial Simulation Methods" href="Spatial Simulation Methods.html"/>
        <link rel="next" title="TransportSSA" href="TransportSSA.html"/>
        <link rel="prev" title="FractionalDiffusion" href="FractionalDiffusion.html"/>

<link href="https://fonts.googleapis.com/css?family=Lato|Montserrat|Open+Sans" rel="stylesheet">



  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Compartmental Modeling (CMS)
          

          
            
            <img src="_static/IDM_white.png" class="logo" />
          
          </a>

          
            
            
          

          <div role="search">
  <form id='rtd-search-form' class='wy-form' action="search-local.html" method="get">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off"
           placeholder="Search docs" required>
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction-modeling.html">Introduction to compartmental modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="cms-installation.html">CMS installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="introduction-software.html">Introduction to the software</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="emodl.html">EMODL – model language for an input model file</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration-file.html">Configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="random-number-library.html">Random number library</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="solvers.html">Solvers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Exact Methods.html">Exact Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="Approximate Methods.html">Approximate Methods</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="Spatial Simulation Methods.html">Spatial Simulation Methods</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="DFSP.html">DFSP</a></li>
<li class="toctree-l4"><a class="reference internal" href="FractionalDiffusion.html">FractionalDiffusion</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">OptimalTransportSSA</a></li>
<li class="toctree-l4"><a class="reference internal" href="TransportSSA.html">TransportSSA</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Specialty Methods.html">Specialty Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output-files.html">Output files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="howto-software.html">How to use the software</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Compartmental Modeling (CMS)</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="introduction-software.html">Introduction to the software</a> &raquo;</li>
        
          <li><a href="solvers.html">Solvers</a> &raquo;</li>
        
          <li><a href="Spatial Simulation Methods.html">Spatial Simulation Methods</a> &raquo;</li>
        
      <li>OptimalTransportSSA</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
<!-- From _templates/page.html -->

  <div class="section" id="optimaltransportssa">
<h1>OptimalTransportSSA<a class="headerlink" href="#optimaltransportssa" title="Permalink to this headline">¶</a></h1>
<p>The OptimalTransport Diffusion (OTSSA) is a solver that attempts to automatically choose between the <a class="reference internal" href="TransportSSA.html"><span class="doc">TransportSSA</span></a> (ISSA) <a class="footnote-reference" href="#id3" id="id1">[1]</a> and <a class="reference internal" href="DFSP.html"><span class="doc">Diffusive Finite State Projection (DFSP)</span></a> <a class="footnote-reference" href="#id4" id="id2">[2]</a> solvers. Diffusion events are modeled as particles that transition to neighboring locales. The ISSA method is ideally suited for systems with a large number of particles, i.e. 1000 particles or more at each locale. On the other hand, DFSP is ideally suited for systems with a small number of particles, i.e. on the order of 10s or 100s of particles.  OTSSA will attempt to dynamically choose which of the above solvers to use per time-step.  This solver is recommended if the modeler does not know whether the system contains a small or large number of particles, or if the modeler knows that the system evolve with both large and small populations.</p>
<p>In terms of the errors of the diffusion solvers, they are all first-order in time and second-order in space, and are therefore similar to using one of the leaping algorithms for the simulation of diffusion processes.  The diffusion methods however execute single reaction events per time-step, as opposed to leaping algorithms that execute multiple reaction events per time-step, and are therefore useful if the modeler chooses to capture detailed events.  Note that all of the diffusion solvers do not need explicit parameter specifications and will automatically use default parameters.</p>
<p><strong>.json OTSSA file template</strong></p>
<div class="highlight-JSON"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;duration&quot;</span> <span class="p">:</span> <span class="mi">1024</span><span class="p">,</span>
    <span class="nt">&quot;runs&quot;</span>   <span class="p">:</span> <span class="mi">512</span><span class="p">,</span>
    <span class="nt">&quot;solver&quot;</span> <span class="p">:</span> <span class="s2">&quot;otssa&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dfsp&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;umax&quot;</span> <span class="p">:</span> <span class="mi">120</span><span class="p">,</span>
        <span class="nt">&quot;verbose&quot;</span> <span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="nt">&quot;otssa&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;verbose&quot;</span> <span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="nt">&quot;tssa&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;epsilon&quot;</span> <span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
        <span class="nt">&quot;greensFunctionIterations&quot;</span> <span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="nt">&quot;verbose&quot;</span> <span class="p">:</span> <span class="kc">false</span>
    <span class="p">}</span> 
<span class="p">}</span> 
</pre></div>
</div>
<p><strong>A portion of an .emodl file is included below to show how diffusive events are specified for</strong> <a class="reference internal" href="TransportSSA.html"><span class="doc">TransportSSA</span></a> <strong>,</strong> <a class="reference internal" href="DFSP.html"><span class="doc">DFSP</span></a> <strong>, and OTSSA.</strong></p>
<div class="highlight-lisp"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nv">locale</span> <span class="nv">site-1</span><span class="p">)</span>
<span class="p">(</span><span class="nv">set-locale</span> <span class="nv">site-1</span><span class="p">)</span>
<span class="p">(</span><span class="nv">species</span> <span class="nv">A::1</span> <span class="mi">1000</span><span class="p">)</span>

<span class="p">(</span><span class="nv">locale</span> <span class="nv">site-2</span><span class="p">)</span>
<span class="p">(</span><span class="nv">set-locale</span> <span class="nv">site-2</span><span class="p">)</span>
<span class="p">(</span><span class="nv">species</span> <span class="nv">A::2</span> <span class="mi">1000</span><span class="p">)</span>

<span class="p">(</span><span class="nv">reaction</span> <span class="nv">A1-&gt;A2</span> <span class="p">(</span><span class="nv">A::1</span><span class="p">)</span> <span class="p">(</span><span class="nv">A::2</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">D</span> <span class="nv">A::1</span><span class="p">))</span>
<span class="p">(</span><span class="nv">reaction</span> <span class="nv">A2-&gt;A1</span> <span class="p">(</span><span class="nv">A::2</span><span class="p">)</span> <span class="p">(</span><span class="nv">A::1</span><span class="p">)</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">D</span> <span class="nv">A::2</span><span class="p">))</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal"><span class="pre">D</span></code> represents the diffusion coefficient and that the reactions specify transitions of species A to neighboring locales.</p>
<p><strong>.json syntax for OTSSA</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">solver</span></code></dt>
<dd>takes a string as an input. <code class="code docutils literal"><span class="pre">OTSSA</span></code>, <code class="code docutils literal"><span class="pre">OptimalTransportSSA</span></code>, and <code class="code docutils literal"><span class="pre">DFSPPrime</span></code> are all valid names to run this solver.</dd>
<dt><code class="docutils literal"><span class="pre">epsilon</span></code> (optional)</dt>
<dd><code class="docutils literal"><span class="pre">epsilon</span></code>  takes a float greater than zero 0 and much less than 1 and determines the error of the approximation.  A value of close to zero is equivalent to a standard stochastic simulation and a value close to 1 is the most aggressive speedup (and largest error).  A default value of 0.01 is used which can be overridden by the user.  We recommend not changing this value.</dd>
<dt><code class="docutils literal"><span class="pre">verbose</span></code> (optional)</dt>
<dd><code class="docutils literal"><span class="pre">verbose</span></code> takes a true or false flag. If true, extra information is printed to the command line, which can  be useful for debugging or testing the solver.</dd>
<dt><code class="docutils literal"><span class="pre">greensFunctionIterations</span></code> (optional for ISSA)</dt>
<dd><code class="docutils literal"><span class="pre">greensFunctionIterations</span></code> takes an integer value between 1 and infinity and is the number of iterations used to compute the fundamental solution of the diffusion equation. The default value is 100.</dd>
<dt><code class="docutils literal"><span class="pre">uMax</span></code> (optional for DFSP)</dt>
<dd><code class="docutils literal"><span class="pre">uMax</span></code> takes an integer value between 1 and infinity and is the maximum number of particles per subvolume without violating the error condition. The maximum value is 150, the default value is 120. If your problem is expected to have more than this, consider using TransportSSA for the solver.</dd>
<dt><code class="docutils literal"><span class="pre">transportSSAThreshold</span></code> (optional for OTSSA)</dt>
<dd><code class="docutils literal"><span class="pre">transportSSAThreshold</span></code> takes an integer value between 1 and infinity and is the threshold for choosing when to run TransportSSA vs DFSP. The default value is uMax * graphDimension, where graphDimension is the dimension of the diffusion problem (this is calculated internally using the number of neighbors). It is not advisable to override the default value of this parameter.</dd>
</dl>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><ol class="first last upperalpha simple" start="19">
<li>Lampoudi, D.T. Gillespie, &amp; L.R. Petzold, “The Multinomial Simulation Algorithm for Discrete Stochastic Simulation of Reaction-Diffusion Systems”. Journal of Chemical Physics, 2009.</li>
</ol>
</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>Brian Drawert, Michael J Lawson, Linda Petzold, Mustafa Khammash, “The Diffusive Finite State Projection Algorithm for Efficient Simulation of the Stochastic Reaction-Diffusion Master Equation”. Journal of Chemical Physics, 2010.</td></tr>
</tbody>
</table>
</div>


<div id="tipue_search_content"></div>

           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="TransportSSA.html" class="btn btn-neutral float-right" title="TransportSSA" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="FractionalDiffusion.html" class="btn btn-neutral" title="FractionalDiffusion" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Intellectual Ventures Management, LLC (IVM). All rights reserved.

    </p>
  </div>
<p>EMOD is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode">Creative Commons Attribution-Noncommercial-ShareAlike 4.0 License</a>.</p>
<p>Send documentation feedback to <a href="mailto:feedback@idmod.org" target="_top">feedback@idmod.org</a>.</p>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/tipuesearch/tipuesearch.js"></script>
      <script type="text/javascript" src="_static/tipuesearch/tipuesearch_content.js"></script>
      <script type="text/javascript" src="_static/tipuesearch/tipuesearch_set.js"></script>
      <script type="text/javascript" src="_static/runsearch.js"></script>
      <script type="text/javascript" src="_static/tablecollapse.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>